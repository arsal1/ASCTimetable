<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Step 3 of 7</title>
    <!--StyleSheets-->
    <link href="../css/steps.css" rel="stylesheet">
    <link href="../Bootstrap/bootstrap-3.3.5-dist/css/bootstrap.css" rel="stylesheet">
    <!-- Scripts-->
    <script src="../Bootstrap/bootstrap-3.3.5-dist/js/jquery-2.1.4.js" type="text/javascript"></script>
    <script src="../Bootstrap/bootstrap-3.3.5-dist/js/bootstrap.js" type="text/javascript"></script>
    <style>
        .TableRow {
            color: #000000;
        }

        .DropDownSize {
            width: 100px;
        }
    </style>


</head>

<body>
<div class="container">
<h5 class="TopHeading">Enter Subjects:</h5>

<div class="col-lg-1 SetFormat">
    <a href="Step3.html"><img src="../images/Steps/Subject_48_Arrow.png" alt="Subject" class="image_left"></a>
    <a href="Step4.html"><img src="../images/Steps/class_48.png" alt="Class" class="image_left"></a>
    <a href="Step5.html"><img src="../images/Steps/room_48.png" alt="Room" class="image_left"></a>
    <a href="Step6.html"> <img src="../images/Steps/teacher_48.png" alt="Teacher" class="image_left"></a>
</div>

<div class="col-lg-8 border">
    <div class="col-lg-12 SetFormat">

        <table id="subjectsEnter" class="table">
            <thead>
            <tr>
                <th>Name</th>
                <th>Short</th>
                <th>Count</th>
                <th>Time off</th>
                <th>Distribution</th>
                <th>Homework preparation</th>
                <th>Max on the question marked:</th>
                <th>Doublelessons can span over</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>

<div class="col-lg-3">
</br> </br>
<button type="button" class="btn btn-default btnWidth" data-toggle="modal" data-target="#myModal">
    <img src="../images/Steps/add_16.png" class="btnImg"> New
</button>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     data-backdrop="static">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Modal title</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-8 col-sm-6">
                        <label>Subject Title:</label>
                    </div>
                    <div class="col-xs-4 col-sm-6">
                        <input type="text" id="subject" name="subject">
                    </div>
                </div>
                <br/>
                <div class="row">
                    <div class="col-xs-8 col-sm-6">
                        <label>Short:</label>
                    </div>
                    <div class="col-xs-4 col-sm-6">
                        <input type="text" id="short" name="short">
                    </div>
                </div>
                <br/>

                <div class="row">
                    <div class="col-xs-8 col-sm-6"></div>
                    <div class="col-xs-4 col-sm-6">
                        <button class="btn btn-default">Custom fields</button>
                    </div>
                </div>
                <br/>

                <div class="row">
                    <div class="col-xs-8 col-sm-6">
                        <label>Color:</label>
                    </div>
                    <div class="col-xs-4 col-sm-6">
                        <input type="color" id="my_color_picker3" value="#336699" data-swatches_only="1">
                    </div>
                </div>
                <br/>

                <div class="SetFormat">
                    <button class="btn btn-default" style="width:530px;">Classrooms</button>
                </div>
                <br/>

                <div class="row">
                    <div class="col-xs-8 col-sm-6">

                    </div>
                    <div class="col-xs-4 col-sm-6">
                        <button class="btn btn-default">Set for all lessons of this subject</button>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button id="saveBtn" type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

</br> </br>  </br>
<button type="button" id="BtnLessons" class="btn btn-default btnWidth" disabled>
    <img src="../images/Steps/lessons_16.png" class="btnImg"> Lessons
</button>


</br> </br>
<button type="button" id="BtnTimeOff" class="btn btn-default btnWidth" data-toggle="modal" data-target="#myModal1"
        disabled>
    <img src="../images/Steps/timeoff_16.png" class="btnImg"> Time off
</button>


<!-- Modal -->
<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1"
     data-backdrop="static">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel1">Modal title</h4>
            </div>
            <div class="modal-body">

                <table class="table table-bordered">
                    <tr>
                        <th></th>
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                        <th>5</th>
                        <th>6</th>
                        <th>7</th>
                    </tr>
                    <tr>
                        <td>Mon</td>
                        <td><a href='javascript:;' onclick="changeImage()"><img id="img1"
                                                                                src="../images/Steps/ok_32.png"></a>
                        </td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                    </tr>
                    <tr>
                        <td>Tues</td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                    </tr>
                    <tr>
                        <td>Wed</td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                    </tr>
                    <tr>
                        <td>Thurs</td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                    </tr>
                    <tr>
                        <td>Fri</td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                    </tr>
                    <tr>
                        <td>Sat</td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                    </tr>
                    <tr>
                        <td>Sun</td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                        <td><a href='javascript:;'><img src="../images/Steps/ok_32.png"></a></td>
                    </tr>
                </table>
                <p>Use Right mouse buttons to set,</p>
            </div>
            <div class="modal-footer">
                <button id="saveBt" type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>

<script>
    function $id(myId) {
        return document.getElementById(myId);
    }

    function changeImage() {
        var img_elem = $id("img1");      //document.getElementById("img1");
        if (img_elem.src.indexOf('ok_32.png') > -1) {
            img_elem.src = '../images/Steps/no_32.png';
        } else {
            img_elem.src = '../images/Steps/ok_32.png';
        }
    }
</script>


</br> </br>
<button type="button" id="BtnConstraints" class="btn btn-default btnWidth" data-toggle="modal" data-target="#myModal2"
        disabled>
    <img src="../images/Steps/constraints_16.png" class="btnImg"> Constraints
</button>

<!-- Modal -->
<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2"
     data-backdrop="static">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel2">Modal title</h4>
            </div>
            <div class="modal-body">
                <input type="checkbox"> Homework preparation required<br/><br/>

                <div class="row">
                    <div class="col-xs-8 col-sm-6">
                        <p>Max on the question marked:</p>
                    </div>
                    <div class="col-xs-4 col-sm-6">
                        <select class="form-control DropDownSize">
                            <option>Arbitrary</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                            <option>6</option>
                            <option>7</option>
                            <option>8</option>
                            <option>9</option>
                        </select>
                    </div>
                </div>
                <br/>
                <input type="checkbox"> Doublelessons can span over 'long breaks'.<br/>
                <input type="checkbox"> Can be over lunch. <br/><br/>

                <div class="row">
                    <div class="col-xs-8 col-sm-6">
                        <p class="SetFormat">Length for teacher's contract</p>
                    </div>
                    <div class="col-xs-4 col-sm-6">
                        <input type="text" class="DropDownSize">
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-8 col-sm-6">
                        <p class="SetFormat">Max students on lessons with this subject:</p>
                    </div>
                    <div class="col-xs-4 col-sm-6">
                        <input type="text" class="DropDownSize">
                    </div>
                </div>
                <br/><br/>

                <div class="row">
                    <div class="col-sm-9">
                        <div class="control-group">
                            <p>Card distribution over the week</p>
                            <input type="range" name="rangeInput" min="0" max="4"
                                   onchange="updateTextInput(this.value);">
                            <input type="text" id="labelInput" value="" style="display: none">
                            <p id="LabelShow">Ideal distribution</p>
                        </div>
                    </div>
                </div><br/>

                <div class="row">
                    <div class="col-xs-8 col-sm-6">
                        <p class="SetFormat">Grade</p>
                    </div>
                    <div class="col-xs-4 col-sm-6">
                        <select class="form-control DropDownSize">
                            <option>Grade 1</option>
                            <option>Grade 2</option>
                            <option>Grade 3</option>
                            <option>Grade 4</option>
                            <option>Grade 5</option>
                            <option>Grade 6</option>
                            <option>Grade 7</option>
                            <option>Grade 8</option>
                            <option>Grade 9</option>
                            <option>Grade 10</option>
                            <option>Grade 11</option>
                            <option>Grade 12</option>
                            <option>Grade 13</option>
                            <option>Grade 14</option>
                            <option>Grade 15</option>
                            <option>Grade 16</option>
                            <option>Grade 17</option>
                            <option>Grade 18</option>
                            <option>Grade 19</option>
                            <option>Grade 20</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-8 col-sm-6">
                    <input type="checkbox"> Temporary Subject
                        </div>
                </div>

            </div>
            <div class="modal-footer">
                <button id="save" type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>


</div>
<div class="col-lg-12">
    </br></br></br></br>
    <hr class="horizontal_line"/>

    <div class="col-lg-9">
        <button type="button" class="btn btn-default RightBtn">
            <img src="../images/Steps/help_16.png" class="btnImg"> Help
        </button>
        <button type="button" class="btn btn-default RightBtn">
            <img src="../images/Steps/save_16.png" class="btnImg"> Save
        </button>
        <button type="button" class="btn btn-default RightBtn">
            <img src="../images/Steps/import_16.png" class="btnImg"> Import
        </button>
    </div>

    <div class="col-lg-3">
        <input type="button" class="btn btn-default" id="btnPrevious" value="Previous">
        <input type="button" class="btn btn-default" id="btnNext" value="Next">
        <input type="button" class="btn btn-default" id="btnCancel" value="Cancel">
    </div>
</div>
</div>
<script type="text/javascript">
    var isItInEditMode = function () {

        var classElem = ($('.itsSelected').length == 0);
        if (classElem) {
            return false;
        }
        else {
            return true;
        }
    }
    $('#subject').keyup(function () {
        $('#short').val($('#subject').val().substr(0, 1));
    });
    $("#saveBtn").on("click", function (e) {
        //saveBtn work here
        var Subject = $("#subject").val();
        var Short = $("#short").val();

        if (isItInEditMode()) {
            var row = $('.itsSelected')[0];
            var rowElems = row.childNodes;

            rowElems[0].firstChild.innerHTML = Subject;
            rowElems[2].firstChild.innerHTML = Short;

            var x = /\sitsSelected\s/.test(row.className)
            console.log(x);
            row.className = row.className.replace(/\sitsSelected/g, '');
        }
        else {
            $('#subjectsEnter tbody').append(
                            "<tr class='clickable_row TableRow'> +"
                            + " <td><a class='clickable_row TableRow' onclick='work(this)'>" + Subject + "</a></td>"
                            + " <td><a class='clickable_row TableRow' href='javascript:;' onclick='work(this)'>" + Short + "</a></td> "
                            + "<td>0</td>"
                            + "<td>Ideal</td>"
                            + " </tr>"
            );
        }
        $("#subject").val("");
        $("#short").val("");

        $id("BtnLessons").disabled = false;
        $id("BtnTimeOff").disabled = false;
        $id("BtnConstraints").disabled = false;
        // e.stopPropagation();
    });


    var work = function (elem) {

        var row = elem.parentElement.parentElement;
        debugger;
        row.className += " itsSelected ";
        var rowElems = row.childNodes;

        var fname = rowElems[0].firstChild.innerHTML;
        var lname = rowElems[2].firstChild.innerHTML;

        /*var childs = $('tbody')[0].childNodes;
         //childs
         childs.forEach(function(item,index,array){
         if(item.className.indexOf('selected_row') != -1){
         item.className.replace(/\bselected_row\b/,'');
         }
         })

         elem.parentElement.parentElement.className += " selected_row";*/

        $("#myModal").modal("show");
        $("#subject").val(fname); //$(this).closest('tr').children()[0].textContent
        $("#short").val(lname); //$(this).closest('tr').children()[1].textContent

        //e.stopPropagation();
    }
    //$('table tbody tr td').on('click',function(){
    $('.clickable_row').on('click', function () {
        $("#myModal").modal("show");
        e.stopPropagation();
        //$("#subject").val($(this).closest('tr').children()[0].textContent);
        //$("#short").val($(this).closest('tr').children()[1].textContent);
    });

    function updateTextInput(val) {
        $id('labelInput').value = val;
        var RangeValue = $id("labelInput").value;
        if (RangeValue == 0) {
            $id("LabelShow").innerHTML = 'No distribution checking';
        }
        else if (RangeValue == 1) {
            $id("LabelShow").innerHTML = 'Low distribution';
        }
        else if (RangeValue == 2) {
            $id("LabelShow").innerHTML = 'Medium distribution';
        }
        else if (RangeValue == 3) {
            $id("LabelShow").innerHTML = 'Ideal distribution';
        }
        else {
            $id("LabelShow").innerHTML = 'Ideal distribution 2'
        }
    }
</script>

</body>
</html>